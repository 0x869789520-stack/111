<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>XDOG - The First XLayer Meme</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');

  * { margin:0; padding:0; box-sizing:border-box; }

  html, body {
    height: 100%;
    font-family: 'Orbitron', sans-serif;
    color: #fff;
    overflow: hidden;
    background-color: #121212;
  }

  .container {
    height: 100%;
    width: 100%;
    overflow-y: scroll;
    scroll-snap-type: y mandatory;
  }

  .section {
    height: 100%;
    width: 100%;
    scroll-snap-align: start;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px;
    position: relative;
  }

  .bg-section {
    background-size: cover;
    background-position: center;
    width: 100%;
    height: 100%;
    position: absolute;
    top:0;
    left:0;
    z-index: 0;
  }

  .content {
    position: relative;
    z-index: 2;
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  h1 {
    font-size: 3rem;
    background: linear-gradient(90deg, #ff7f50, #ffdf50, #50bfff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 20px;
  }

  p { font-size: 1.4rem; max-width: 800px; line-height: 1.6; margin-bottom: 30px; }

  .ca {
    font-size: 1rem;
    background: #222222;
    padding: 10px 20px;
    border-radius: 12px;
    letter-spacing: 1px;
    margin-bottom: 25px;
    width: 220px;
    word-break: break-word;
    cursor: pointer;
    white-space: pre-wrap;
  }

  .card {
    background: rgba(26,26,26,0.85);
    padding: 20px;
    border-radius: 16px;
    width: 350px;
    box-shadow: 0 0 15px rgba(0,0,0,0.6);
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .value { font-size: 1.2rem; margin: 8px 0; }

  .btn { display: inline-block; padding: 10px 20px; border-radius: 12px; font-weight: bold; text-decoration: none; color: #fff; cursor: pointer; }
  .btn-buy { background-color: #95E244; margin-top: 12px; width: 80%; text-align: center; }
  .btn-join { background-color: #66A9E0; }
  .btn-x { background-color: #1DA1F2; }

  .button-row { display: flex; justify-content: space-between; width: 100%; margin-top: 8px; }

  /* 第二页散落小图 */
  .thumb {
    width: 20vw; 
    height: auto;
    max-width: 200px; 
    position: absolute;
    cursor: pointer;
    border-radius: 12px;
    transition: transform 0.2s;
  }
  .thumb:hover { transform: scale(1.1); }

  /* 模态弹窗 */
  #modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:1000; }
  #modal img { max-width:90%; max-height:90%; border-radius:12px; }

  @media (max-width: 768px) {
    h1 { font-size: 2rem; }
    p { font-size: 1rem; }
    .card { width: 90%; }
    .ca { width: 80%; }
    .thumb { width: 30vw; max-width: 150px; }
  }
</style>
</head>
<body>

<div class="container">

  <!-- 第一页 -->
  <div class="section" id="page1">
    <div class="bg-section" style="background-image:url('bg1.jpg');"></div>
    <div class="content">
      <h1>XDOG</h1>
      <p>The first meme in the x layer ecology.<br>Committed to making x layer great.<br>XDOG is not only a meme, but also a totem.</p>
      <p>x层生态第一meme，致力于让x层变得伟大。<br>XDOG不仅是meme，更是图腾。</p>
      <div class="ca" onclick="copyCA()">CA:
0x0cc24c51bf89c00c5affbfcf5e856c25ecbdb48e</div>

      <div class="button-row" style="width:250px;">
        <a href="https://t.me/okbokbokx" target="_blank" class="btn btn-join">Join Us</a>
        <a href="https://x.com/CtoXdog" target="_blank" class="btn btn-x">X</a>
      </div>
    </div>
  </div>

  <!-- 第二页 -->
  <div class="section" id="page2">
    <div class="bg-section" style="background-image:url('bg2.jpg');"></div>
    <div class="content" id="thumb-container">
      <img src="img1.jpg" class="thumb" onclick="openModal(this.src)">
      <img src="img2.jpg" class="thumb" onclick="openModal(this.src)">
      <img src="img3.jpg" class="thumb" onclick="openModal(this.src)">
    </div>
  </div>

  <!-- 第三页 -->
  <div class="section" id="page3">
    <div class="bg-section" style="background-image:url('bg3.jpg');"></div>
    <div class="content">
      <div class="ca" onclick="copyCA()">CA:
0x0cc24c51bf89c00c5affbfcf5e856c25ecbdb48e</div>

      <div class="card">
        <div class="value" id="price">价格：加载中...</div>
        <div class="value" id="marketcap">市值：加载中...</div>
        <a href="https://dyorswap.finance/swap/?chainId=196&outputCurrency=OKB&inputCurrency=0x0cc24c51BF89c00c5afFBfCf5E856C25ecBdb48e" target="_blank" class="btn btn-buy">Buy</a>
      </div>
    </div>
  </div>

</div>

<!-- 模态弹窗 -->
<div id="modal">
  <img id="modal-img" src="">
</div>

<script>
  // CA 复制
  function copyCA() {
    const text = '0x0cc24c51bf89c00c5affbfcf5e856c25ecbdb48e';
    navigator.clipboard.writeText(text);
  }

  // 模态弹窗
  function openModal(src) {
    const modal = document.getElementById('modal');
    const modalImg = document.getElementById('modal-img');
    modal.style.display = 'flex';
    modalImg.src = src;
  }
  document.getElementById('modal').addEventListener('click', function() {
    this.style.display = 'none';
  });

  // 第二页小图随机散落且不重叠（增加边距避免靠近）
  function placeThumbsRandomly() {
    const container = document.getElementById('thumb-container');
    const thumbs = Array.from(container.querySelectorAll('.thumb'));
    const positions = [];
    const margin = 15; // 最小边距百分比

    thumbs.forEach(thumb => {
      let safe = false;
      let top, left;

      let attempts = 0;
      while (!safe && attempts < 1000) {
        top = Math.random() * (70 - margin*2) + margin;
        left = Math.random() * (70 - margin*2) + margin;

        safe = positions.every(pos => {
          return Math.abs(pos.top - top) > margin && Math.abs(pos.left - left) > margin;
        });
        attempts++;
      }

      positions.push({top, left});
      thumb.style.top = top + '%';
      thumb.style.left = left + '%';
    });
  }

  window.addEventListener('load', placeThumbsRandomly);

  // CoinGecko 获取 XDOG 价格和市值
  const tokenId = 'xdog';
  let lastPrice = null;
  const priceElem = document.getElementById('price');
  const marketcapElem = document.getElementById('marketcap');

  async function updatePrice() {
    try {
      const res = await fetch(`https://api.coingecko.com/api/v3/coins/${tokenId}?t=${Date.now()}`);
      const data = await res.json();
      if (data && data.market_data) {
        const price = parseFloat(data.market_data.current_price.usd).toFixed(6);
        const marketcap = data.market_data.market_cap.usd.toLocaleString();

        if (lastPrice !== null) {
          if (price > lastPrice) priceElem.style.color = '#00FF00';
          else if (price < lastPrice) priceElem.style.color = '#FF0000';
          else priceElem.style.color = '#FFFFFF';
        }
        lastPrice = price;

        priceElem.textContent = `价格：$${price}`;
        marketcapElem.textContent = `市值：$${marketcap}`;
      }
    } catch (err) {
      console.error('CoinGecko error:', err);
    }
  }

  updatePrice();
  setInterval(updatePrice, 5000);
</script>

</body>
</html>